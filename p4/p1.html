<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªçc Thu·ªôc Aptis Reading Part 1</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .progress-section {
            background: white;
            padding: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .controls {
            padding: 20px;
            background: #f5f5f5;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            color: white;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
        }
        
        .btn-info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .content {
            padding: 30px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .topic-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        
        .topic-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transform: translateY(-5px);
        }
        
        .topic-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }
        
        .topic-title {
            font-size: 1.8em;
            color: #667eea;
            font-weight: bold;
        }
        
        .answers-list {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .answer-item {
            padding: 12px;
            margin: 10px 0;
            background: white;
            border-left: 4px solid #667eea;
            border-radius: 5px;
            font-size: 1.1em;
        }
        
        .answer-number {
            font-weight: bold;
            color: #667eea;
            margin-right: 10px;
        }
        
        .answer-word {
            color: #764ba2;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .mnemonic {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border-left: 4px solid #4caf50;
        }
        
        .mnemonic strong {
            color: #2e7d32;
        }
        
        .quiz-mode {
            display: none;
        }
        
        .quiz-mode.active {
            display: block;
        }
        
        .fill-blank-text {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.15em;
            line-height: 2;
            margin: 20px 0;
        }
        
        .blank-input {
            display: inline-block;
            min-width: 120px;
            padding: 5px 10px;
            border: 2px solid #667eea;
            border-radius: 5px;
            background: white;
            font-weight: bold;
            color: #667eea;
            text-align: center;
        }
        
        .blank-slot {
            display: inline-block;
            min-width: 120px;
            padding: 5px 10px;
            border: 2px dashed #999;
            border-radius: 5px;
            background: #fff9c4;
            text-align: center;
            cursor: pointer;
        }
        
        .blank-slot:hover {
            background: #fff59d;
            border-color: #667eea;
        }
        
        .word-options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
            justify-content: center;
        }
        
        .word-option {
            padding: 12px 20px;
            background: #667eea;
            color: white;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            user-select: none;
        }
        
        .word-option:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }
        
        .word-option.used {
            opacity: 0.3;
            pointer-events: none;
        }
        
        .quiz-result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.2em;
            text-align: center;
            display: none;
        }
        
        .quiz-result.show {
            display: block;
        }
        
        .quiz-result.correct {
            background: #c8e6c9;
            color: #2e7d32;
        }
        
        .quiz-result.incorrect {
            background: #ffcdd2;
            color: #c62828;
        }
        
        .special-topics {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .special-topics h2 {
            color: #d63031;
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }
            
            .topic-title {
                font-size: 1.3em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìù H·ªçc Thu·ªôc Aptis Reading Part 1</h1>
            <p>Fill in the Blanks - ƒêi·ªÅn t·ª´ v√†o ch·ªó tr·ªëng</p>
        </div>
        
        <div class="progress-section">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill">0/20</div>
            </div>
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" onclick="toggleMode()">
                <span id="modeText">üéØ Ch·∫ø ƒë·ªô Quiz</span>
            </button>
            <button class="btn btn-success" onclick="markLearned()">‚úì ƒê√£ h·ªçc</button>
            <button class="btn btn-info" onclick="showRandomQuiz()">üé≤ Quiz ng·∫´u nhi√™n</button>
            <button class="btn btn-danger" onclick="resetProgress()">‚Ü∫ Reset</button>
        </div>
        
        <div class="content">
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-label">T·ªïng topics</div>
                    <div class="stat-number">20</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ƒê√£ h·ªçc</div>
                    <div class="stat-number" id="learnedCount">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">C√≤n l·∫°i</div>
                    <div class="stat-number" id="remainingCount">20</div>
                </div>
            </div>
            
            <div id="normalMode" class="normal-mode">
                <!-- Topics will be inserted here -->
            </div>
            
            <div id="quizMode" class="quiz-mode">
                <div class="topic-card">
                    <div class="topic-header">
                        <h2 class="topic-title" id="quizTopicTitle">Quiz Mode</h2>
                        <button class="btn btn-info" onclick="nextQuiz()">C√¢u ti·∫øp ‚Üí</button>
                    </div>
                    <div id="quizContent"></div>
                    <div class="word-options" id="wordOptions"></div>
                    <button class="btn btn-primary" onclick="checkAnswer()" style="margin-top: 20px;">Ki·ªÉm tra ƒë√°p √°n</button>
                    <div id="quizResult" class="quiz-result"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const topics = [
            {
                id: 1,
                title: "Mountain",
                answers: ["Station", "Stop", "Green", "Dinner", "Movies"],
                mnemonic: "Tr∆∞·ªõc khi t·ªõi GA T√ÄU  l·ªëi D·ª™NG L·∫†I ·ªü c·ªët ƒë·ªÅn M√ÄU XANH ƒë·ªÉ ƒÇN T·ªêI v√† XEM PHIM"
            },
            {
                id: 2,
                title: "The arrival of four-day week",
                answers: ["morning", "friends", "leave", "good", "food"],
                mnemonic: "BU·ªîI S√ÅNG h√¥m sau B·∫†N B√à ƒëi R·ªéI DI v√† ƒë·ªÅ l·∫°i d√†nh gi·∫£ T·ªêT v·ªÅ c√°c v·ª• ƒÇN U·ªêNG"
            },
            {
                id: 3,
                title: "Wellness Trends",
                answers: ["park", "classes", "silver", "breakfast", "meditation"],
                mnemonic: "C√îNG VI√äN , L·ªöP H·ªåC l√† nh·ªØng ƒë·ªãa ƒëi·ªÉm 'B·∫†C' ƒë·ªÉ ƒÇN S√ÅNG v√† ng·ªìi THI·ªÄN ƒê·ªäNH"
            },
            {
                id: 4,
                title: "Urban Development",
                answers: ["bicycle", "stalls", "trees", "breakfast", "games"],
                mnemonic: "XE ƒê·∫†P t√¥ng QU·∫¶Y H√ÄNG b√°n C√ÇY n√™n t√¥i kh√¥ng b√°n n·ª≠a m√† ƒëi ƒÇN S√ÅNG v√† tham gia TR√í CH∆†I ·ªü k·ª≥"
            },
            {
                id: 5,
                title: "Woman Mathematics",
                answers: ["love", "small", "shop", "people", "visit"],
                mnemonic: "Khi T√åNH Y√äU nh·ªè c·ªßa C·ª¶A H√ÄNG l√¨a anh s·∫Ω m·ªùi M·ªåI NG∆Ø·ªúI GH√â THƒÇM"
            },
            {
                id: 6,
                title: "Zoo",
                answers: ["Long", "Detail", "Copy", "Busy", "Client"],
                mnemonic: "M·ªôt ng√†y D√ÄI (long) : T√¥i ph·∫£i ki·ªÉm tra CHI TI·∫æT (detail), in B·∫¢N SAO (copy) b√°o G·∫¶N (near) nh√† t√¥i c√≥ m·ªôt ng∆∞·ªùi b·∫°n TH√ÇN THI·ªÜN (friendly). Ch√∫ng t√¥i c√πng nhau LUY·ªÜN T·∫¨P (practice) v√† ƒê·ªåC S√ÅCH (read) m·ªói ng√†y, V√å TH·∫æ (so) ch√∫ng t√¥i h·ªçc r·∫•t gi·ªèi. c√°o ƒë·ªÉ g·∫∑p KH√ÅCH H√ÄNG (client) => khi·∫øn t√¥i B·∫¨N R·ªòN (busy)"
            },
            {
                id: 7,
                title: "Coffee",
                answers: ["Near", "Friendly", "Practice", "Read", "So"],
                mnemonic: "M·ªôt ng√†y D√ÄI (long) : T√¥i ph·∫£i ki·ªÉm tra CHI TI·∫æT (detail), in B·∫¢N SAO (copy) b√°o G·∫¶N (near) nh√† t√¥i c√≥ m·ªôt ng∆∞·ªùi b·∫°n TH√ÇN THI·ªÜN (friendly). Ch√∫ng t√¥i c√πng nhau LUY·ªÜN T·∫¨P (practice) v√† ƒê·ªåC S√ÅCH (read) m·ªói ng√†y, V√å TH·∫æ (so) ch√∫ng t√¥i h·ªçc r·∫•t gi·ªèi."
            },
            {
                id: 8,
                title: "Tulip",
                answers: ["Sick", "Read", "Meeting", "Ringing", "Drink"],
                mnemonic: "T√¥i b·ªã ·ªëm (SICK) nhung v·∫´n c·ªë ƒë·ªçc (READ) b√°o c√°o ƒë·ªÉ chu·∫©n b·ªã cho cu·ªôc h·ªçp (MEETING), th√¨ ƒëi·ªán tho·∫°i ƒë·ªï chu√¥ng (RINGING). V·ªõi u·ªëng (DRINK) n∆∞·ªõc r·ªìi ƒëi ngay!"
            },
            {
                id: 9,
                title: "Eating in China",
                answers: ["Miss", "Call", "Ready", "Meet", "Dinner"],
                mnemonic: "Th·∫±ng cu MIT (miss) G·ªåI ƒêI·ªÜN (call) cho ny ƒë·ªÉ th√¥ng b√°o S·∫¥N S√ÄNG (ready) G·∫∂P G·ª† (meet) v√†o B·ªÆA T·ªêI (dinner)"
            },
            {
                id: 10,
                title: "Meatless diet g√≥c",
                answers: ["Just", "Too", "At", "Some", "Give"],
                mnemonic: "JUST QU√Å ( too ) √ÅT ∆† (At) khi ƒëi toilet mang thi·ªÅu IT ( some ) gi·∫•y. M·ªçi ng∆∞·ªùi h√£y ƒê∆ØA ( give ) gi·∫•y cho L∆∞u √Ω : + Just col l√† t√™n nh√¢n v·∫≠t c√¢u chuy·ªán + √ÅT ∆† : ng·∫Øn ng·ªß"
            },
            {
                id: 11,
                title: "Charles Dickens M·ªõi",
                answers: ["Great", "boat", "then", "around", "too"],
                mnemonic: "T√≠nh y√™u c·ªßa h·ªç TUY·ªÜT V·ªúI ( Great ) th·ªÉ m√† v·∫´n ch√¨m THUY·ªÄN ( Boat ), SAU ( Then ) nh√¨n QUANH ( Around ) l·∫°i th·∫•y QU√Å ( Too ) nh·ªõc nhau L∆∞u √Ω : Chim thuy·ªÅn ·ªü ƒë√¢y c√≥ nghƒ©a l√† chia tay, ly d·ªã ( Gi·∫£i th√≠ch th√™m ƒë·ªÉ m·∫•y anh ch·ªã l·ªõn tu·ªëi hi·ªÉu ƒë∆∞·ª£c ng√¥n ng·ªØ c·ªßa ng∆∞·ªùi tr·∫ª nh∆∞ b·ªçn em )"
            },
            {
                id: 12,
                title: "Early Australia",
                answers: ["clear", "sun", "enjoyable", "working", "read"],
                mnemonic: "C·∫ßn ƒê·ªåC ( Read ) l·ªùi tho·∫°i G√ïN G√ÅNG ( Clear ), m∆∞·ª£t nh∆∞ SUNSILK ( Sun ) th√¨ L√ÄM C√ÅN B·∫∞NG ( Balance ) t√†i kho·∫£n ph·∫£i ƒë·ªçc B√ÅO C√ÅO ( Statement ) k·ªπ, SUY NGHƒ® ( THINK ) CH·∫¨M ( Slowly ), TR∆Ø·ªöC KHI ( Before ) ch·∫°y t·∫£i kho·∫£n L∆∞u √Ω : C√≥ ƒë√°p ·ª©ng th√¨ thu·∫≠n mi·∫øng h∆°n"
            },
            {
                id: 13,
                title: "Frozen Land",
                answers: ["Balance", "Statement", "Think", "Slowly", "Before"],
                mnemonic: "C·∫ßn ƒê·ªåC ( Read ) l·ªùi tho·∫°i G√ïN G√ÅNG ( Clear ), m∆∞·ª£t nh∆∞ SUNSILK ( Sun ) th√¨ L√ÄM C√ÅN B·∫∞NG ( Balance ) t√†i kho·∫£n ph·∫£i ƒë·ªçc B√ÅO C√ÅO ( Statement ) k·ªπ, SUY NGHƒ® ( LIKE ( Live ), SHARE vui v·ªÅ r·ªìi g·∫∑p anh T√ÄI X·∫æ ( Drive ) ·ªü L·ªöP H·ªåC ( Class ), sau ƒë√≥ n·ªØ anh VI·ªÜC ( Working ) m·ªùi TH∆Ø VI ( enjoyable ) ƒë∆∞·ª£c THINK ) CH·∫¨M ( Slowly ), TR∆Ø·ªöC KHI ( Before ) ch·∫°y t·∫£i kho·∫£n L∆∞u √Ω : Ch·∫°y t·∫£i kho·∫£n ·ªü ƒë√¢y c√≥ nghƒ©a l√† thua l√¥ s·∫°ch ti·ªÅn ( Gi·∫£i th√≠ch th√™m cho 1 s·ªë anh ch·ªã l·ªõn tu·ªïi ƒë·ªÉ hi·ªÉu )"
            },
            {
                id: 14,
                title: "Children Exercise",
                answers: ["Live", "Share", "Class", "Driver", "Cook"],
                mnemonic: "C·∫ßn ƒê·ªåC ( Read ) l·ªùi tho·∫°i G√ïN G√ÅNG ( Clear ), m∆∞·ª£t nh∆∞ SUNSILK ( Sun ) th√¨ L√ÄM C√ÅN B·∫∞NG ( Balance ) t√†i kho·∫£n ph·∫£i ƒë·ªçc B√ÅO C√ÅO ( Statement ) k·ªπ, SUY NGHƒ® ( LIKE ( Live ), SHARE vui v·ªÅ r·ªìi g·∫∑p anh T√ÄI X·∫æ ( Drive ) ·ªü L·ªöP H·ªåC ( Class ), sau ƒë√≥ n·ªØ anh VI·ªÜC ( Working ) m·ªùi TH∆Ø VI ( enjoyable ) ƒë∆∞·ª£c THINK ) CH·∫¨M ( Slowly ), TR∆Ø·ªöC KHI ( Before ) ch·∫°y t·∫£i kho·∫£n L∆∞u √Ω : + Like v√† Live ƒë·ªçc g·∫ßn gi·ªëng nhau n√™n m√¨nh vi·∫øt th√†nh c√¢u chuy·ªán cho no ƒë·ªÉ h·ªçc + Like, Share ·ªü ƒë√¢y l√† t∆∞∆°ng t√°c tr√™n mang x√£ h·ªôi + C√¢u chuy·ªán vui v·ªÅ v·ªÅ h√†nh tr√¨nh l·∫•y ch·ªìng trong 3 th√°ng"
            },
            {
                id: 15,
                title: "Music",
                answers: ["Late", "meetings", "park", "shop", "cook"],
                mnemonic: "ƒêi H·ªåP MU·ªòN ( Late meetings ) n√™n t√¥i b·ªã d∆∞·ªõi vi·ªác. T√¥i c≈©ng r·∫•t bu·ªìn n√™n ra C√îNG VI√äN (PARK) th∆∞ gi√£n, sau ƒë√≥ ra C·ª¨A H√ÄNG (SHOP) mua ƒë·ªì v·ªÅ N·∫§U ƒÇN (COOK). C√¢u chuy·ªán : B·ªã d∆∞·ªõi vi·ªác v√¨ ƒëi h·ªçp mu·ªôn"
            },
            {
                id: 16,
                title: "Consummer Age",
                answers: ["Window", "Buy", "market", "Cake", "Watch"],
                mnemonic: "Nh√¨n ra C·ª¨A S·ªî ( Window ), th·∫•y ng∆∞·ªùi ta MUA ( Buy ) ƒë·ªì ngo√†i CH·ª¢ ( Market ), t√¥i c≈©ng t∆∞ ƒëi mua B√ÅNH ( Cake ) ƒë·ªÉ ƒÉn khi NG·ªéI XEM ( Watch ) phiml"
            },
            {
                id: 17,
                title: "Dogget g√≥c",
                answers: ["Early", "Lunch", "Leave", "Car", "Sleep"],
                mnemonic: "D·∫≠y S·ªöM (EARLY), ƒÉn TR∆ØA (LUNCH) xong, r·ªìi R·ªúI (LEAVE) ra XE (CAR) ƒë·ªÉ NG·ª¶ ( Sleep ) lu√¥n"
            },
            {
                id: 18,
                title: "Hotel",
                answers: ["Home", "Drive", "Friends", "Park", "Pretty"],
                mnemonic: "V·ªÅ NH√Ä (Home), L√ÅI XE (Drive) ƒëi ƒë√≥n B·∫†N (Friends) ƒëi C√îNG VI√äN (Park) ng·∫Øm c·∫£nh ƒê·∫∏P (Pretty)."
            },
            {
                id: 19,
                title: "Hotel (continued)",
                answers: ["Friendly", "Walk", "First", "Speak", "Together"],
                mnemonic: "NG∆Ø·ªúI TH√ÇN THI·ªÜN (friendly) t√¥i g·∫∑p ·ªü 1 l·∫ßn ƒêI B·ªò ( Walk ) trong c√¥ng vi√™n. G·∫∂P L·∫¶N ƒê·∫¶U (first) nhung h·ªç N√ìI CHUY·ªÜN (speak) r·∫•t g·∫ßn g≈©i, n√™n ch∆°i CHUNG ( together) lu√¥n"
            },
            // Topics kh√¥ng c√≥ t√™n (Special topics)
            {
                id: 20,
                title: "Special Topic (No name)",
                answers: ["small", "stay", "garden", "stress", "old"],
                mnemonic: "Hi Alex, Our family are going on a vacation. Yesterday, we visited a ---- X [small] village. We ---- X [stay] in a small house in the village. There is a ---- X [garden] in the house."
            }
        ];

        let currentQuizIndex = 0;
        let learnedTopics = JSON.parse(localStorage.getItem('part1LearnedTopics') || '[]');
        let isQuizMode = false;
        let userAnswers = [];

        function renderTopics() {
            const container = document.getElementById('normalMode');
            
            // Separate special topics
            const normalTopics = topics.filter(t => t.id <= 19);
            const specialTopics = topics.filter(t => t.id >= 20);
            
            let html = '';
            
            // Render normal topics
            normalTopics.forEach(topic => {
                const isLearned = learnedTopics.includes(topic.id);
                html += `
                    <div class="topic-card" data-id="${topic.id}" style="${isLearned ? 'opacity: 0.6;' : ''}">
                        <div class="topic-header">
                            <h2 class="topic-title">${topic.id}. ${topic.title} ${isLearned ? '‚úì' : ''}</h2>
                        </div>
                        
                        <div class="answers-list">
                            <h3 style="color: #667eea; margin-bottom: 15px;">üìù 5 t·ª´ c·∫ßn nh·ªõ:</h3>
                            ${topic.answers.map((answer, i) => `
                                <div class="answer-item">
                                    <span class="answer-number">${i + 1}.</span>
                                    <span class="answer-word">${answer}</span>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="mnemonic">
                            <strong>üí° M·∫πo ghi nh·ªõ:</strong><br>
                            ${topic.mnemonic}
                        </div>
                    </div>
                `;
            });
            
            // Render special topics
            if (specialTopics.length > 0) {
                html += '<div class="special-topics">';
                html += '<h2>üåü Topics ƒë·∫∑c bi·ªát (Kh√¥ng c√≥ t√™n)</h2>';
                specialTopics.forEach(topic => {
                    const isLearned = learnedTopics.includes(topic.id);
                    html += `
                        <div class="topic-card" data-id="${topic.id}" style="${isLearned ? 'opacity: 0.6;' : ''}">
                            <div class="topic-header">
                                <h2 class="topic-title">${topic.title} ${isLearned ? '‚úì' : ''}</h2>
                            </div>
                            
                            <div class="answers-list">
                                <h3 style="color: #667eea; margin-bottom: 15px;">üìù 5 t·ª´ c·∫ßn nh·ªõ:</h3>
                                ${topic.answers.map((answer, i) => `
                                    <div class="answer-item">
                                        <span class="answer-number">${i + 1}.</span>
                                        <span class="answer-word">${answer}</span>
                                    </div>
                                `).join('')}
                            </div>
                            
                            <div class="mnemonic">
                                <strong>üí° M·∫πo ghi nh·ªõ:</strong><br>
                                ${topic.mnemonic}
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            container.innerHTML = html;
            updateStats();
        }

        function toggleMode() {
            isQuizMode = !isQuizMode;
            document.getElementById('normalMode').style.display = isQuizMode ? 'none' : 'block';
            document.getElementById('quizMode').classList.toggle('active', isQuizMode);
            document.getElementById('modeText').textContent = isQuizMode ? 'üìö Ch·∫ø ƒë·ªô H·ªçc' : 'üéØ Ch·∫ø ƒë·ªô Quiz';
            
            if (isQuizMode) {
                showRandomQuiz();
            }
        }

        function showRandomQuiz() {
            const unlearned = topics.filter(t => !learnedTopics.includes(t.id));
            if (unlearned.length === 0) {
                alert('Ch√∫c m·ª´ng! B·∫°n ƒë√£ h·ªçc h·∫øt t·∫•t c·∫£ c√°c topics!');
                if (isQuizMode) toggleMode();
                return;
            }
            
            const topic = unlearned[Math.floor(Math.random() * unlearned.length)];
            userAnswers = Array(5).fill(null);
            
            // Create text with blanks
            const blankText = `ƒêi·ªÅn 5 t·ª´ v√†o ƒë√∫ng v·ªã tr√≠: ${topic.answers.map((_, i) => 
                `<span class="blank-slot" onclick="selectBlank(${i})" id="blank-${i}">___${i+1}___</span>`
            ).join(' ... ')}`;
            
            document.getElementById('quizTopicTitle').textContent = topic.title;
            document.getElementById('quizContent').innerHTML = `
                <div class="fill-blank-text">${blankText}</div>
                <p style="text-align: center; color: #666; margin: 10px 0;">
                    <em>Click v√†o ch·ªó tr·ªëng, sau ƒë√≥ ch·ªçn t·ª´ b√™n d∆∞·ªõi</em>
                </p>
            `;
            
            // Shuffle answers for word options
            const shuffled = [...topic.answers].sort(() => Math.random() - 0.5);
            document.getElementById('wordOptions').innerHTML = shuffled.map((word, i) => 
                `<div class="word-option" onclick="fillBlank('${word}')" id="word-${word}">${word}</div>`
            ).join('');
            
            document.getElementById('quizResult').classList.remove('show', 'correct', 'incorrect');
            window.currentQuizTopic = topic;
            window.selectedBlankIndex = null;
            
            if (!isQuizMode) {
                isQuizMode = true;
                document.getElementById('normalMode').style.display = 'none';
                document.getElementById('quizMode').classList.add('active');
                document.getElementById('modeText').textContent = 'üìö Ch·∫ø ƒë·ªô H·ªçc';
            }
        }

        function selectBlank(index) {
            // Remove previous selection
            document.querySelectorAll('.blank-slot').forEach(b => b.style.background = '#fff9c4');
            
            // Highlight selected blank
            document.getElementById(`blank-${index}`).style.background = '#ffeb3b';
            window.selectedBlankIndex = index;
        }

        function fillBlank(word) {
            if (window.selectedBlankIndex === null) {
                alert('Vui l√≤ng ch·ªçn v·ªã tr√≠ c·∫ßn ƒëi·ªÅn tr∆∞·ªõc!');
                return;
            }
            
            // Fill the blank
            const blankEl = document.getElementById(`blank-${window.selectedBlankIndex}`);
            blankEl.innerHTML = `<span class="blank-input">${word}</span>`;
            blankEl.style.background = '#c8e6c9';
            blankEl.onclick = null; // Disable clicking
            
            // Mark word as used
            document.getElementById(`word-${word}`).classList.add('used');
            
            // Store answer
            userAnswers[window.selectedBlankIndex] = word;
            
            // Reset selection
            window.selectedBlankIndex = null;
        }

        function checkAnswer() {
            if (userAnswers.includes(null)) {
                alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß 5 t·ª´!');
                return;
            }
            
            const topic = window.currentQuizTopic;
            const isCorrect = userAnswers.every((ans, i) => ans === topic.answers[i]);
            
            const result = document.getElementById('quizResult');
            result.classList.add('show', isCorrect ? 'correct' : 'incorrect');
            
            if (isCorrect) {
                result.innerHTML = 'üéâ <strong>Ch√≠nh x√°c!</strong> B·∫°n ƒë√£ ƒëi·ªÅn ƒë√∫ng t·∫•t c·∫£!';
                if (!learnedTopics.includes(topic.id)) {
                    learnedTopics.push(topic.id);
                    localStorage.setItem('part1LearnedTopics', JSON.stringify(learnedTopics));
                    updateStats();
                }
            } else {
                const correctAnswers = topic.answers.join(', ');
                result.innerHTML = `‚ùå <strong>Ch∆∞a ƒë√∫ng!</strong><br>ƒê√°p √°n ƒë√∫ng: <strong>${correctAnswers}</strong><br><em style="display: block; margin-top: 10px;">M·∫πo: ${topic.mnemonic}</em>`;
            }
        }

        function nextQuiz() {
            showRandomQuiz();
        }

        function markLearned() {
            const visibleTopic = document.querySelector('.topic-card:not([style*="opacity"])');
            if (visibleTopic) {
                const topicId = parseInt(visibleTopic.dataset.id);
                if (!learnedTopics.includes(topicId)) {
                    learnedTopics.push(topicId);
                    localStorage.setItem('part1LearnedTopics', JSON.stringify(learnedTopics));
                    renderTopics();
                }
            }
        }

        function resetProgress() {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a ti·∫øn ƒë·ªô h·ªçc?')) {
                learnedTopics = [];
                localStorage.removeItem('part1LearnedTopics');
                renderTopics();
            }
        }

        function updateStats() {
            const learned = learnedTopics.length;
            const total = topics.length;
            document.getElementById('learnedCount').textContent = learned;
            document.getElementById('remainingCount').textContent = total - learned;
            
            const progressFill = document.getElementById('progressFill');
            const percentage = (learned / total) * 100;
            progressFill.style.width = percentage + '%';
            progressFill.textContent = `${learned}/${total}`;
        }

        // Initialize
        renderTopics();
    </script>
</body>
</html>