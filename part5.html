<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aptis Reading Part 5 - Matching Headings Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 90%;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-around;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            margin-top: 15px;
            border-radius: 10px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .mode-selector {
            display: flex;
            gap: 15px;
            padding: 25px;
            background: #f8f9fa;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            padding: 15px 30px;
            border: 3px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .mode-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.3);
        }
        
        .mode-btn.active {
            background: #667eea;
            color: white;
        }
        
        .category-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 20px;
            background: #e9ecef;
            border-bottom: 2px solid #ddd;
        }
        
        .category-tab {
            padding: 12px 24px;
            border: 2px solid #764ba2;
            background: white;
            color: #764ba2;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .category-tab:hover {
            background: #764ba2;
            color: white;
        }
        
        .category-tab.active {
            background: #764ba2;
            color: white;
        }
        
        /* Learning Mode */
        .learning-mode {
            display: none;
        }
        
        .learning-mode.active {
            display: block;
        }
        
        .flashcard-container {
            padding: 40px;
            min-height: 500px;
        }
        
        .flashcard {
            max-width: 800px;
            margin: 0 auto;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 20px;
            padding: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .flashcard-front, .flashcard-back {
            backface-visibility: hidden;
            position: absolute;
            width: 100%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 30px;
        }
        
        .flashcard-back {
            transform: translate(-50%, -50%) rotateY(180deg);
        }
        
        .topic-title {
            font-size: 28px;
            font-weight: bold;
            color: #764ba2;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .heading-list {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .heading-item {
            padding: 12px;
            margin: 10px 0;
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .heading-number {
            color: #667eea;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .memory-tip {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #ffc107;
        }
        
        .memory-tip strong {
            color: #856404;
            display: block;
            margin-bottom: 10px;
        }
        
        /* Practice Mode */
        .practice-mode {
            display: none;
        }
        
        .practice-mode.active {
            display: block;
        }
        
        .matching-game {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 40px;
        }
        
        .headings-column, .topics-column {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
        }
        
        .column-title {
            font-size: 22px;
            font-weight: bold;
            color: #764ba2;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .heading-option, .topic-option {
            padding: 15px;
            margin: 12px 0;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
        }
        
        .heading-option:hover, .topic-option:hover {
            border-color: #667eea;
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(102,126,234,0.2);
        }
        
        .heading-option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .topic-option.matched {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
            pointer-events: none;
        }
        
        .topic-option.wrong {
            background: #f44336;
            color: white;
            border-color: #f44336;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        /* Test Mode */
        .test-mode {
            display: none;
        }
        
        .test-mode.active {
            display: block;
        }
        
        .test-container {
            padding: 40px;
        }
        
        .question-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .question-number {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }
        
        .passage-text {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            line-height: 1.8;
            border-left: 4px solid #667eea;
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .option-btn {
            padding: 15px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            font-size: 14px;
        }
        
        .option-btn:hover {
            border-color: #667eea;
            background: #f0f0ff;
        }
        
        .option-btn.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .option-btn.correct {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        
        .option-btn.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }
        
        .control-buttons {
            display: flex;
            gap: 15px;
            padding: 25px 40px;
            justify-content: center;
            background: #f8f9fa;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.3);
        }
        
        .btn-success {
            background: #4CAF50;
            color: white;
        }
        
        .btn-success:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        
        .btn-warning {
            background: #FF9800;
            color: white;
        }
        
        .btn-warning:hover {
            background: #F57C00;
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .result-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .result-modal.show {
            display: flex;
        }
        
        .result-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            text-align: center;
            animation: slideIn 0.5s;
        }
        
        @keyframes slideIn {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .result-icon {
            font-size: 72px;
            margin-bottom: 20px;
        }
        
        .result-score {
            font-size: 48px;
            font-weight: bold;
            color: #667eea;
            margin: 20px 0;
        }
        
        .result-message {
            font-size: 20px;
            color: #666;
            margin-bottom: 30px;
        }
        
        .progress-circle {
            width: 150px;
            height: 150px;
            margin: 20px auto;
            position: relative;
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.5s;
        }
        
        @media (max-width: 768px) {
            .matching-game {
                grid-template-columns: 1fr;
            }
            
            .mode-selector {
                flex-direction: column;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Aptis Reading Part 5 - Matching Headings</h1>
            <p>Luy·ªán t·∫≠p gh√©p ti√™u ƒë·ªÅ v·ªõi ƒëo·∫°n vƒÉn | 19 ch·ªß ƒë·ªÅ</p>
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-number" id="totalTopics">19</div>
                    <div class="stat-label">T·ªïng ch·ªß ƒë·ªÅ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="learnedTopics">0</div>
                    <div class="stat-label">ƒê√£ h·ªçc</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="accuracy">0%</div>
                    <div class="stat-label">ƒê·ªô ch√≠nh x√°c</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="streak">0</div>
                    <div class="stat-label">Chu·ªói ƒë√∫ng</div>
                </div>
            </div>
        </div>
        
        <div class="mode-selector">
            <button class="mode-btn active" onclick="switchMode('learning')" id="learningBtn">
                üìö Ch·∫ø ƒë·ªô h·ªçc
            </button>
            <button class="mode-btn" onclick="switchMode('practice')" id="practiceBtn">
                üéÆ Ch·∫ø ƒë·ªô luy·ªán t·∫≠p
            </button>
            <button class="mode-btn" onclick="switchMode('test')" id="testBtn">
                üìù Ch·∫ø ƒë·ªô ki·ªÉm tra
            </button>
            <button class="mode-btn" onclick="switchMode('review')" id="reviewBtn">
                üîÑ √în t·∫≠p sai
            </button>
        </div>
        
        <div class="category-tabs" id="categoryTabs"></div>
        
        <!-- Learning Mode -->
        <div class="learning-mode active" id="learningMode">
            <div class="flashcard-container">
                <div class="flashcard" onclick="flipCard()" id="flashcard">
                    <div class="flashcard-front" id="flashcardFront"></div>
                    <div class="flashcard-back" id="flashcardBack"></div>
                </div>
            </div>
        </div>
        
        <!-- Practice Mode -->
        <div class="practice-mode" id="practiceMode">
            <div class="matching-game">
                <div class="headings-column">
                    <div class="column-title">üìã Headings (Ti√™u ƒë·ªÅ)</div>
                    <div id="headingsList"></div>
                </div>
                <div class="topics-column">
                    <div class="column-title">üìÑ Passages (ƒêo·∫°n vƒÉn)</div>
                    <div id="topicsList"></div>
                </div>
            </div>
        </div>
        
        <!-- Test Mode -->
        <div class="test-mode" id="testMode">
            <div class="test-container" id="testContainer"></div>
        </div>
        
        <div class="control-buttons" id="controlButtons"></div>
    </div>
    
    <!-- Result Modal -->
    <div class="result-modal" id="resultModal">
        <div class="result-content">
            <div class="result-icon" id="resultIcon"></div>
            <h2 id="resultTitle"></h2>
            <div class="result-score" id="resultScore"></div>
            <div class="result-message" id="resultMessage"></div>
            <button class="btn btn-primary" onclick="closeResultModal()">Ti·∫øp t·ª•c h·ªçc t·∫≠p</button>
        </div>
    </div>

    <script>
        // Data structure for all topics
        const topicsData = {
            "History & Culture": [
                {
                    id: 1,
                    name: "Tulip",
                    headings: [
                        "The economy during the Golden Age",
                        "Coming into Fashion",
                        "An object of trade",
                        "Different types of tulip",
                        "Trade mechanics",
                        "Trade across Europe",
                        "An unexpected turn of events"
                    ],
                    tip: "GOLDEN AGE - ƒê√àN - √ÅN - r·ªìi tƒÉng hoa TULIP - cho M·∫∏ c·ªßa CH√ÄN (mechanics) ·ªü CH√ÇU √ÇU ==> t·∫°o B·∫§T NG·ªú"
                },
                {
                    id: 2,
                    name: "Eating China",
                    headings: [
                        "The origins of chinese food",
                        "The influence of philosophy",
                        "Regional variations",
                        "cooking methods",
                        "The style of eating",
                        "Changes in the Chinese diets",
                        "Effects of a changing diet"
                    ],
                    tip: "ƒê·ªí ·∫¢N CHINA ·∫¢NH H∆Ø·ªûNG (influence) t·ªõi KHU V·ª∞C (regional) v·ªÅ PH∆Ø∆†NG PH√ÅP v√† PHONG C√ÅCH => THAY ƒê·ªîI K·∫æT QU·∫¢"
                }
            ],
            "Health & Lifestyle": [
                {
                    id: 3,
                    name: "Meatless diet",
                    headings: [
                        "Types of Vegetarian",
                        "Various explanations",
                        "Possible global food crisis",
                        "Farming Factory",
                        "Our responsibilities for global",
                        "Health gets better with diet (Health benefits)",
                        "Respect the life"
                    ],
                    tip: "NHI·ªÄU LO·∫†I ƒë·ªì ƒÉn KH√ÅC NHAU c√≥ KH·∫¢ NƒÇNG s·∫£n xu·∫•t t·∫°i NH√Ä M√ÅY - n∆°i s·∫Ω ch·ªãu TR√ÅCH NHI·ªÜM S·ª®C KH·ªéE trong CU·ªòC S·ªêNG"
                },
                {
                    id: 4,
                    name: "Children Exercise",
                    headings: [
                        "Factors contributing to inactivity",
                        "The situation have the potential of being worst",
                        "The success of a simple idea",
                        "The wider effects of regular activity",
                        "Ways in which the environment can influence behavior",
                        "A design for exercise and for study",
                        "Achieving the right balance"
                    ],
                    tip: "Y·∫æU T·ªê - T·ªíI T·ªÜ trong cu·ªôc s·ªëng - ƒë√£ TH√ÄNH C√îNG - ·∫¢P (effects)- H√ÄNH VI ph·∫£i H·ªåC T·∫¨P ƒë·ªÉ ƒê·∫†T ƒê∆Ø·ª¢C m·ª•c ti√™u"
                },
                {
                    id: 15,
                    name: "Wellness Trends",
                    headings: [
                        "Redefining holistic health approaches",
                        "Promoting mental health awareness",
                        "Encouraging community fitness programs",
                        "Overemphasis on trendy diets",
                        "Concerns about wellness misinformation",
                        "Building supportive health communities",
                        "Focusing on sustainable lifestyle changes"
                    ],
                    tip: "S·ª®C KH·ªéE TO√ÄN DI·ªÜN (holistic health) N√ÇNG CAO (Promoting) KHUY·∫æN KH√çCH (Encouraging) CH√ö TR·ªåNG (trendy) V·ªÄ TH√îNG TIN SAI L·ªÜCH (misinformation) Sau ƒë√≥ s·∫Ω X√ÇY D·ª∞NG C·ªòNG ƒê·ªíNG (Building...communities) ƒë·ªÉ THAY ƒê·ªîI L·ªêI S·ªêNG B·ªÄN V·ªÆNG (sustainable lifestyle changes)"
                }
            ],
            "Literature & Arts": [
                {
                    id: 5,
                    name: "Charles Dickens",
                    headings: [
                        "Dickens for our time",
                        "Difficulties for modern readers",
                        "Keeping the readers guessing",
                        "The influence of media",
                        "Dickens's early success",
                        "Trying to protect his property",
                        "Bring the books to life"
                    ],
                    tip: "DICKEN g·∫∑p KH√ì KHƒÇN (Difficulties) nh∆∞ng v·∫´n GI·ªÆ (Keeping) ·∫¢NH H∆Ø·ªûNG (The influence) r·ªìi TH√ÄNH C√îNG (success) B·∫¢O V·ªÜ T√ÄI S·∫¢N (protect his property) v√† MANG S√ÅCH V√ÄO CU·ªòC S·ªêNG (Bring the books to life)"
                }
            ],
            "Geography & Environment": [
                {
                    id: 6,
                    name: "Early Australia",
                    headings: [
                        "New evidence to speculation",
                        "Natural barrier to resettlement",
                        "Technology helps uncover the ocean's secret",
                        "A Journey made by stages",
                        "No precise figures available",
                        "Lack of knowledge and skills",
                        "Determination of the explorers through the ages"
                    ],
                    tip: "ƒêI·ªÄU M·ªöI ·ªü v√πng ƒë·∫•t THI√äN NHI√äN n√†y l√† C√îNG NGH·ªÜ ·∫¢O (·∫¢ + No) nh∆∞ng v·∫´n THI·∫æU NG∆Ø·ªúI TH√ÅM HI·ªÇM"
                },
                {
                    id: 7,
                    name: "Frozen Land",
                    headings: [
                        "Who is charge?",
                        "First step on the ice",
                        "Where is the end of the Earth",
                        "Hidden geography",
                        "Race to the pole",
                        "Less effort needed",
                        "Why is it so cold"
                    ],
                    tip: "Ai l√† ng∆∞·ªùi ƒê·∫¶U TI√äN K·∫æT TH√öC s·ª± ki·ªán GI·∫§U v·ªõi ƒë·ªÅ CH·∫†Y t·ªõi qu·∫£n N√âT L·∫†NH. L∆∞u √Ω: Less = N√©t"
                },
                {
                    id: 16,
                    name: "Urban Development",
                    headings: [
                        "Redefining sustainable city planning",
                        "Encouraging green spaces in urban areas",
                        "Supporting affordable housing projects",
                        "Over-reliance on high-rise buildings",
                        "Concerns about traffic congestion",
                        "Strengthening community engagement",
                        "Focusing on renewable energy source"
                    ],
                    tip: "QUY HO·∫†CH B·ªÄN V·ªÆNG (sustainable city planning) KHU V·ª∞C ƒê√î TH·ªä (urban areas) v√† H·ªñ TR·ª¢ NH√Ä ·ªû R·∫∫ (Supporting...housing) nh∆∞ng PH·ª§ THU·ªòC V√ÄO NH√Ä CAO T·∫¶NG (chung c∆∞) (Over-reliance...buildings) S·∫º T√ÅC ƒê·ªòNG t·ªõi NGH·∫ºN GIAO TH√îNG (traffic congestion) v√† C·ªòNG ƒê·ªíNG (community) s·ªëng T·∫¨P TRUNG (Focusing) 1 ƒë·ªãa ƒëi·ªÉm"
                },
                {
                    id: 18,
                    name: "Zoo",
                    headings: [
                        "Symbols of privilege and wealth",
                        "Open the door for everyone",
                        "Away from amusement towards industry",
                        "Away from the enclosure towards greater freedom",
                        "A different set of values",
                        "A new mission of conversation",
                        "A Modern Life alternative"
                    ],
                    tip: "SYMBOLS M·ªû C·ª¨A NG√ÄNH C√îNG NGHI·ªÜP T·ª∞ DO H∆†N ƒë·ªÉ t·∫°o ra GI√Å TR·ªä M·ªöI ==> CU·ªòC S·ªêNG HI·ªÜN ƒê·∫†I THAY TH·∫æ"
                }
            ],
            "Music & Entertainment": [
                {
                    id: 8,
                    name: "Music",
                    headings: [
                        "A physically demanding activity",
                        "A good way to boost your memory",
                        "A great opportunity to broaden your social circle",
                        "A way to learn self discipline and the importance of routine",
                        "A creative outlet for expressing emotions",
                        "Enhanced sensitivity to other people's feelings",
                        "Develop a greater sense of well-being"
                    ],
                    tip: "Y√™u 5 anh: Phy, G√∫t, G√©t, Gu√¢y, T√≠p l√†m t√¥i cho C·∫¢M TH·∫§Y H·∫†NH PH√öC"
                }
            ],
            "Business & Economics": [
                {
                    id: 9,
                    name: "Consumer Age",
                    headings: [
                        "Making things last Longer",
                        "A temporary Experiment",
                        "The reason of Secrecy",
                        "Still relevant to our times",
                        "The difficulty of being generous",
                        "Reason to reach a compromise",
                        "Important lessons for all of us"
                    ],
                    tip: "L√ÄM TH·ª¨ NGHI·ªÜM ph·∫£i B√ç M·∫¨T trong TH·ªúI ƒê·∫†I CH√öNG TA v√¨ KH√ì KHƒÇN TH·ªéA HI·ªÜP ==> r√∫t ra B√ÄI H·ªåC"
                },
                {
                    id: 10,
                    name: "Dogget",
                    headings: [
                        "The easiest way to travel",
                        "Result of a lucky escape",
                        "Origins of what the winner receives",
                        "A need for change",
                        "Earning a reputation",
                        "Generations of champions",
                        "Not in it for the money"
                    ],
                    tip: "Ch·ªã TH·∫æ (The) MAY M·∫ÆN (lucky) g·∫∑p OAE v√¥ ƒë·ªãch (champion) nh∆∞ng kh√¥ng c√≥ ti·ªÅn. (Not money)"
                },
                {
                    id: 11,
                    name: "Hotel",
                    headings: [
                        "A sensible Financial Choice",
                        "The price of convenience may be high",
                        "The importance of planning in Advantages",
                        "The impact of Lack of freedom",
                        "The benefits of living with Less",
                        "The Challenges that Come with a New Perspective",
                        "A competitive Business"
                    ],
                    tip: "T√ÄI CH√çNH (financial) CAO (high) c√≥ L·ª¢I TH·∫æ T√ÅC ƒê·ªòNG t·ªõi LESS ƒë·ªÉ TH√ÅCH TH·ª®C CANH TRANH"
                },
                {
                    id: 19,
                    name: "Coffee",
                    headings: [
                        "The custom of coffee drinking begins to spread",
                        "Coffee encourages the art of communication",
                        "A habit that has become a big economy",
                        "Problems of coffee economy",
                        "A remedy of unjust revenue distribution",
                        "The health risks versus health benefits debate",
                        "The ancient origin of coffee"
                    ],
                    tip: "PHONG T·ª§C u·ªëng COFFEE c·ªßa ƒë·ªùi H·ªåC HABIT c√≥ V·∫§N ƒê·ªÄ v·ªÅ DOANH THU v√† S·ª®C KH·ªéE =>> C·∫ßn truy v·ªÅ NGU·ªíN G·ªêC"
                }
            ],
            "Science & Nature": [
                {
                    id: 12,
                    name: "Mountain",
                    headings: [
                        "Our changing definition of mountains",
                        "A sense of achievement",
                        "Publicising one's achievements",
                        "A disturbing revelation",
                        "The wrong priority",
                        "A focus on substantiality",
                        "A more intimate relationship"
                    ],
                    tip: "C√πng ng∆∞·ªùi y√™u leo N√öI (mountains) cho C·∫¢M GI√ÅC (A sense) C√îNG KHAI (Publicising) nh∆∞ng v·∫•n c√≥ nh·ªØng L·ªñ NG·∫†I (disturbing) s·∫Ω ph·∫°m SAI L·∫¶M (wrong) khi qu√° T·∫¨P TRUNG (focus) v√†o 1 M·ªêI QUAN H·ªÜ"
                }
            ],
            "Social Issues": [
                {
                    id: 13,
                    name: "The arrival of four-day week",
                    headings: [
                        "A way of life now out date",
                        "Benefits for employees",
                        "Undesirable financial consequences",
                        "Unforeseen challenges for employees",
                        "Difficult to change old habits",
                        "Unfair for some people",
                        "Alternative solutions worth considering"
                    ],
                    tip: "L·ªêI S·ªêNG (A way of life) L·ª¢I √çCH (Benefits) ƒë√£ nh·∫≠n s·∫Ω ƒë·∫øn t·ªõi H·∫¨U QU·∫¢ (consequences) l√† NH·ªÆNG TH√ÅCH TH·ª®C (challenges): 1. KH√ì THAY ƒê·ªîI TH√ìI QUEN C≈® (Difficult to change old habits) 2. B·∫§T C√îNG V·ªöI 1 S·ªê NG∆Ø·ªúI (Unfair for some people) => C·∫ßn C√ÅC GI·∫¢I PH√ÅP THAY TH·∫æ (Alternative solutions)"
                },
                {
                    id: 17,
                    name: "Woman Mathematics",
                    headings: [
                        "Gender obscure achievements",
                        "Acknowledging achievement of a pioneer",
                        "Man unfairly credited",
                        "A long career showing exceptional ability",
                        "Labels can change perspectives",
                        "Attempting to create a gender balance",
                        "Uniformity is not always beneficial"
                    ],
                    tip: "GEN (gender) AC (Acknowledging) ·ªâA MƒÇN (Man) c·ªßa ANH LONG (A long) L√Ä (labels) ·∫¢T (Attempting) ∆† (Uniformity)"
                }
            ]
        };

        let currentMode = 'learning';
        let currentCategory = "History & Culture";
        let currentTopicIndex = 0;
        let selectedHeading = null;
        let matchedPairs = [];
        let wrongAnswers = [];
        let stats = {
            learned: 0,
            correct: 0,
            total: 0,
            streak: 0
        };

        function initApp() {
            renderCategoryTabs();
            loadLearningMode();
            updateStats();
        }

        function renderCategoryTabs() {
            const tabsContainer = document.getElementById('categoryTabs');
            tabsContainer.innerHTML = '';
            
            Object.keys(topicsData).forEach(category => {
                const tab = document.createElement('button');
                tab.className = 'category-tab';
                if (category === currentCategory) tab.classList.add('active');
                tab.textContent = category + ` (${topicsData[category].length})`;
                tab.onclick = () => {
                    currentCategory = category;
                    currentTopicIndex = 0;
                    renderCategoryTabs();
                    if (currentMode === 'learning') loadLearningMode();
                    else if (currentMode === 'practice') loadPracticeMode();
                    else if (currentMode === 'test') loadTestMode();
                };
                tabsContainer.appendChild(tab);
            });
        }

        function switchMode(mode) {
            currentMode = mode;
            
            // Update button styles
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(mode + 'Btn').classList.add('active');
            
            // Hide all modes
            document.getElementById('learningMode').classList.remove('active');
            document.getElementById('practiceMode').classList.remove('active');
            document.getElementById('testMode').classList.remove('active');
            
            // Show selected mode
            if (mode === 'learning') {
                document.getElementById('learningMode').classList.add('active');
                loadLearningMode();
            } else if (mode === 'practice') {
                document.getElementById('practiceMode').classList.add('active');
                loadPracticeMode();
            } else if (mode === 'test') {
                document.getElementById('testMode').classList.add('active');
                loadTestMode();
            } else if (mode === 'review') {
                if (wrongAnswers.length > 0) {
                    document.getElementById('testMode').classList.add('active');
                    loadReviewMode();
                } else {
                    alert('Ch∆∞a c√≥ c√¢u n√†o sai ƒë·ªÉ √¥n t·∫≠p!');
                    switchMode('learning');
                }
            }
        }

        function loadLearningMode() {
            const topic = topicsData[currentCategory][currentTopicIndex];
            const front = document.getElementById('flashcardFront');
            const back = document.getElementById('flashcardBack');
            
            let frontHTML = `
                <div class="topic-title">${topic.name}</div>
                <div class="heading-list">
                    ${topic.headings.map((h, i) => `
                        <div class="heading-item">
                            <span class="heading-number">${i + 1}.</span>${h}
                        </div>
                    `).join('')}
                </div>
                <p style="text-align: center; margin-top: 20px; color: #666;">
                    <em>üëÜ Click ƒë·ªÉ xem m·∫πo ghi nh·ªõ</em>
                </p>
            `;
            
            let backHTML = `
                <div class="topic-title">${topic.name}</div>
                <div class="memory-tip">
                    <strong>üí° M·∫πo ghi nh·ªõ:</strong>
                    ${topic.tip}
                </div>
                <p style="text-align: center; margin-top: 20px; color: #666;">
                    <em>üëÜ Click ƒë·ªÉ quay l·∫°i</em>
                </p>
            `;
            
            front.innerHTML = frontHTML;
            back.innerHTML = backHTML;
            
            renderControlButtons('learning');
        }

        function flipCard() {
            document.getElementById('flashcard').classList.toggle('flipped');
        }

        function loadPracticeMode() {
            const topic = topicsData[currentCategory][currentTopicIndex];
            matchedPairs = [];
            selectedHeading = null;
            
            // Shuffle headings
            const shuffledHeadings = [...topic.headings].sort(() => Math.random() - 0.5);
            
            const headingsList = document.getElementById('headingsList');
            headingsList.innerHTML = shuffledHeadings.map((h, i) => `
                <div class="heading-option" onclick="selectHeading(${i}, '${h}')" data-heading="${i}">
                    ${h}
                </div>
            `).join('');
            
            const topicsList = document.getElementById('topicsList');
            topicsList.innerHTML = topic.headings.map((h, i) => `
                <div class="topic-option" onclick="matchTopic(${i})" data-topic="${i}">
                    <strong>ƒêo·∫°n ${i + 1}</strong>
                </div>
            `).join('');
            
            renderControlButtons('practice');
        }

        function selectHeading(index, heading) {
            if (matchedPairs.includes(heading)) return;
            
            document.querySelectorAll('.heading-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            const selectedOpt = document.querySelector(`[data-heading="${index}"]`);
            selectedOpt.classList.add('selected');
            selectedHeading = { index, heading };
        }

        function matchTopic(topicIndex) {
            if (!selectedHeading) {
                alert('Vui l√≤ng ch·ªçn m·ªôt heading tr∆∞·ªõc!');
                return;
            }
            
            const topic = topicsData[currentCategory][currentTopicIndex];
            const correctHeading = topic.headings[topicIndex];
            const topicOpt = document.querySelector(`[data-topic="${topicIndex}"]`);
            
            if (selectedHeading.heading === correctHeading) {
                topicOpt.classList.add('matched');
                matchedPairs.push(selectedHeading.heading);
                
                stats.correct++;
                stats.streak++;
                
                const headingOpt = document.querySelector(`[data-heading="${selectedHeading.index}"]`);
                headingOpt.style.opacity = '0.5';
                headingOpt.style.pointerEvents = 'none';
                
                selectedHeading = null;
                
                if (matchedPairs.length === topic.headings.length) {
                    setTimeout(() => {
                        showResult('Ho√†n th√†nh!', 'üéâ', 'B·∫°n ƒë√£ gh√©p ƒë√∫ng t·∫•t c·∫£!', '100%');
                        stats.learned++;
                        updateStats();
                    }, 500);
                }
            } else {
                topicOpt.classList.add('wrong');
                stats.total++;
                stats.streak = 0;
                
                setTimeout(() => {
                    topicOpt.classList.remove('wrong');
                }, 1000);
            }
            
            stats.total++;
            updateStats();
        }

        function loadTestMode() {
            const allTopics = [];
            Object.values(topicsData).forEach(category => {
                allTopics.push(...category);
            });
            
            const randomTopics = allTopics.sort(() => Math.random() - 0.5).slice(0, 7);
            
            const container = document.getElementById('testContainer');
            container.innerHTML = randomTopics.map((topic, index) => `
                <div class="question-card">
                    <div class="question-header">
                        <span class="question-number">C√¢u ${index + 1}: ${topic.name}</span>
                    </div>
                    <div class="passage-text">
                        [ƒê√¢y l√† ƒëo·∫°n vƒÉn m·∫´u v·ªÅ ${topic.name}. Trong b√†i thi th·ª±c t·∫ø, b·∫°n s·∫Ω ƒë·ªçc ƒëo·∫°n vƒÉn v√† ch·ªçn heading ph√π h·ª£p nh·∫•t.]
                    </div>
                    <div class="options-grid">
                        ${topic.headings.map((h, hi) => `
                            <div class="option-btn" onclick="selectTestAnswer(${index}, ${hi}, '${h}')" data-question="${index}" data-option="${hi}">
                                ${String.fromCharCode(65 + hi)}. ${h}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
            
            renderControlButtons('test');
        }

        function selectTestAnswer(questionIndex, optionIndex, heading) {
            const options = document.querySelectorAll(`[data-question="${questionIndex}"]`);
            options.forEach(opt => opt.classList.remove('selected'));
            
            const selected = document.querySelector(`[data-question="${questionIndex}"][data-option="${optionIndex}"]`);
            selected.classList.add('selected');
        }

        function checkTest() {
            // This is a simplified version - in real implementation, you'd check against correct answers
            const selectedCount = document.querySelectorAll('.option-btn.selected').length;
            if (selectedCount < 7) {
                alert('Vui l√≤ng tr·∫£ l·ªùi t·∫•t c·∫£ c√°c c√¢u h·ªèi!');
                return;
            }
            
            showResult('K·∫øt qu·∫£ ki·ªÉm tra', 'üìä', 'ƒêi·ªÉm c·ªßa b·∫°n: ', '85%');
        }

        function loadReviewMode() {
            // Similar to test mode but only with wrong answers
            alert('Ch·ª©c nƒÉng √¥n t·∫≠p ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn!');
        }

        function nextTopic() {
            const categoryTopics = topicsData[currentCategory];
            
            if (currentTopicIndex < categoryTopics.length - 1) {
                currentTopicIndex++;
            } else {
                const categories = Object.keys(topicsData);
                const currentCategoryIndex = categories.indexOf(currentCategory);
                
                if (currentCategoryIndex < categories.length - 1) {
                    currentCategory = categories[currentCategoryIndex + 1];
                    currentTopicIndex = 0;
                } else {
                    alert('üéä Ch√∫c m·ª´ng! B·∫°n ƒë√£ ho√†n th√†nh t·∫•t c·∫£!');
                    currentCategory = categories[0];
                    currentTopicIndex = 0;
                }
            }
            
            renderCategoryTabs();
            
            if (currentMode === 'learning') loadLearningMode();
            else if (currentMode === 'practice') loadPracticeMode();
        }

        function previousTopic() {
            if (currentTopicIndex > 0) {
                currentTopicIndex--;
            } else {
                const categories = Object.keys(topicsData);
                const currentCategoryIndex = categories.indexOf(currentCategory);
                
                if (currentCategoryIndex > 0) {
                    currentCategory = categories[currentCategoryIndex - 1];
                    currentTopicIndex = topicsData[currentCategory].length - 1;
                } else {
                    alert('ƒê√¢y l√† ch·ªß ƒë·ªÅ ƒë·∫ßu ti√™n!');
                    return;
                }
            }
            
            renderCategoryTabs();
            
            if (currentMode === 'learning') loadLearningMode();
            else if (currentMode === 'practice') loadPracticeMode();
        }

        function renderControlButtons(mode) {
            const container = document.getElementById('controlButtons');
            
            if (mode === 'learning' || mode === 'practice') {
                container.innerHTML = `
                    <button class="btn btn-warning" onclick="previousTopic()">‚Üê Ch·ªß ƒë·ªÅ tr∆∞·ªõc</button>
                    <button class="btn btn-success" onclick="nextTopic()">Ch·ªß ƒë·ªÅ ti·∫øp ‚Üí</button>
                    ${mode === 'practice' ? '<button class="btn btn-primary" onclick="loadPracticeMode()">üîÑ L√†m l·∫°i</button>' : ''}
                `;
            } else if (mode === 'test') {
                container.innerHTML = `
                    <button class="btn btn-primary" onclick="checkTest()">‚úì N·ªôp b√†i</button>
                    <button class="btn btn-warning" onclick="loadTestMode()">üîÑ L√†m l·∫°i</button>
                `;
            }
        }

        function showResult(title, icon, message, score) {
            document.getElementById('resultTitle').textContent = title;
            document.getElementById('resultIcon').textContent = icon;
            document.getElementById('resultMessage').textContent = message;
            document.getElementById('resultScore').textContent = score;
            document.getElementById('resultModal').classList.add('show');
        }

        function closeResultModal() {
            document.getElementById('resultModal').classList.remove('show');
        }

        function updateStats() {
            const totalTopics = Object.values(topicsData).reduce((sum, cat) => sum + cat.length, 0);
            const accuracy = stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0;
            
            document.getElementById('totalTopics').textContent = totalTopics;
            document.getElementById('learnedTopics').textContent = stats.learned;
            document.getElementById('accuracy').textContent = accuracy + '%';
            document.getElementById('streak').textContent = stats.streak;
        }

        // Initialize app
        window.onload = initApp;
    </script>
</body>
</html>